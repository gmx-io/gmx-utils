{"version":3,"sources":["../../../../scripts/prebuild/prebuildKinkModelMarketRatesKeys.ts"],"names":[],"mappings":";;;;;;;AAYO,SAAS,iCAAiC,SAAA,EAAmB;AAClE,EAAA,MAAM,eAAA,GAAkB,OAAA,CAAQ,OAAO,CAAA,CAAE,MAAA;AAAA,IACvC,CAAC,SAAA,EAAW,CAAC,OAAA,EAAS,OAAO,CAAA,KAAM;AACjC,MAAA,MAAM,YAAA,GAAe,OAAA,CAAQ,OAAO,CAAA,CAAE,MAAA;AAAA,QACpC,CAAC,UAAA,EAAY,CAAC,aAAa,CAAA,KAAM;AAC/B,UAAA,MAAM,aAAa,WAAA,CAAY;AAAA,YAC7B,sBAAA,EAAwB;AAAA,cACtB,CAAC,SAAA,EAAW,SAAA,EAAW,MAAM,CAAA;AAAA,cAC7B,CAAC,oBAAA,EAAsB,aAAA,EAAe,IAAI;AAAA,aAC5C;AAAA,YACA,uBAAA,EAAyB;AAAA,cACvB,CAAC,SAAA,EAAW,SAAA,EAAW,MAAM,CAAA;AAAA,cAC7B,CAAC,oBAAA,EAAsB,aAAA,EAAe,KAAK;AAAA,aAC7C;AAAA,YACA,uBAAA,EAAyB;AAAA,cACvB,CAAC,SAAA,EAAW,SAAA,EAAW,MAAM,CAAA;AAAA,cAC7B,CAAC,qBAAA,EAAuB,aAAA,EAAe,IAAI;AAAA,aAC7C;AAAA,YACA,wBAAA,EAA0B;AAAA,cACxB,CAAC,SAAA,EAAW,SAAA,EAAW,MAAM,CAAA;AAAA,cAC7B,CAAC,qBAAA,EAAuB,aAAA,EAAe,KAAK;AAAA,aAC9C;AAAA,YACA,oCAAA,EAAsC;AAAA,cACpC,CAAC,SAAA,EAAW,SAAA,EAAW,MAAM,CAAA;AAAA,cAC7B,CAAC,oCAAA,EAAsC,aAAA,EAAe,IAAI;AAAA,aAC5D;AAAA,YACA,qCAAA,EAAuC;AAAA,cACrC,CAAC,SAAA,EAAW,SAAA,EAAW,MAAM,CAAA;AAAA,cAC7B,CAAC,oCAAA,EAAsC,aAAA,EAAe,KAAK;AAAA;AAC7D,WACD,CAAA;AAED,UAAA,UAAA,CAAW,aAAa,CAAA,GAAI,UAAA;AAE5B,UAAA,OAAO,UAAA;AAAA,QACT,CAAA;AAAA,QACA;AAAC,OACH;AAEA,MAAA,SAAA,CAAU,OAAO,CAAA,GAAI,YAAA;AAErB,MAAA,OAAO,SAAA;AAAA,IACT,CAAA;AAAA,IACA;AAAC,GACH;AAEA,EAAA,EAAA,CAAG,SAAA,CAAU,SAAA,EAAW,EAAE,SAAA,EAAW,MAAM,CAAA;AAC3C,EAAA,EAAA,CAAG,aAAA;AAAA,IACD,OAAA,CAAQ,WAAW,qCAAqC,CAAA;AAAA,IACxD,IAAA,CAAK,SAAA,CAAU,eAAA,EAAiB,IAAA,EAAM,CAAC;AAAA,GACzC;AAEA,EAAA,OAAO,eAAA;AACT","file":"prebuildKinkModelMarketRatesKeys.js","sourcesContent":["import fs from \"fs\";\nimport entries from \"lodash/entries\";\nimport { resolve } from \"path\";\nimport { hashDataMap } from \"../../src/lib/hash\";\n\nimport {\n  OPTIMAL_USAGE_FACTOR,\n  BASE_BORROWING_FACTOR,\n  ABOVE_OPTIMAL_USAGE_BORROWING_FACTOR,\n} from \"../../src/configs/dataStore\";\nimport { MARKETS } from \"../../src/configs/markets\";\n\nexport function prebuildKinkModelMarketRatesKeys(outputDir: string) {\n  const chainMarketKeys = entries(MARKETS).reduce(\n    (chainsAcc, [chainId, markets]) => {\n      const chainMarkets = entries(markets).reduce(\n        (marketsAcc, [marketAddress]) => {\n          const marketKeys = hashDataMap({\n            optimalUsageFactorLong: [\n              [\"bytes32\", \"address\", \"bool\"],\n              [OPTIMAL_USAGE_FACTOR, marketAddress, true],\n            ],\n            optimalUsageFactorShort: [\n              [\"bytes32\", \"address\", \"bool\"],\n              [OPTIMAL_USAGE_FACTOR, marketAddress, false],\n            ],\n            baseBorrowingFactorLong: [\n              [\"bytes32\", \"address\", \"bool\"],\n              [BASE_BORROWING_FACTOR, marketAddress, true],\n            ],\n            baseBorrowingFactorShort: [\n              [\"bytes32\", \"address\", \"bool\"],\n              [BASE_BORROWING_FACTOR, marketAddress, false],\n            ],\n            aboveOptimalUsageBorrowingFactorLong: [\n              [\"bytes32\", \"address\", \"bool\"],\n              [ABOVE_OPTIMAL_USAGE_BORROWING_FACTOR, marketAddress, true],\n            ],\n            aboveOptimalUsageBorrowingFactorShort: [\n              [\"bytes32\", \"address\", \"bool\"],\n              [ABOVE_OPTIMAL_USAGE_BORROWING_FACTOR, marketAddress, false],\n            ],\n          });\n\n          marketsAcc[marketAddress] = marketKeys;\n\n          return marketsAcc;\n        },\n        {}\n      );\n\n      chainsAcc[chainId] = chainMarkets;\n\n      return chainsAcc;\n    },\n    {}\n  );\n\n  fs.mkdirSync(outputDir, { recursive: true });\n  fs.writeFileSync(\n    resolve(outputDir, \"hashedKinkModelMarketRatesKeys.json\"),\n    JSON.stringify(chainMarketKeys, null, 2)\n  );\n\n  return chainMarketKeys;\n}\n"]}