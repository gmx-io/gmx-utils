{"version":3,"sources":["../../../../../src/domain/pricing/contractPrice.ts"],"names":[],"mappings":";;;AAOO,SAAS,kBAAA,CAAmB,OAAe,aAAA,EAAuB;AACvE,EAAA,OAAO,KAAA,GAAQ,cAAA,CAAe,CAAA,EAAG,aAAa,CAAA;AAChD;AAEO,SAAS,sBAAA,CACd,OACA,aAAA,EACe;AACf,EAAA,OAAQ,KAAA,GAAQ,cAAA,CAAe,CAAA,EAAG,aAAa,CAAA;AACjD;AAEO,SAAS,4BAAA,CACd,QACA,aAAA,EACA;AACA,EAAA,OAAO;AAAA,IACL,GAAA,EAAK,sBAAA,CAAuB,MAAA,CAAO,QAAA,EAAU,aAAa,CAAA;AAAA,IAC1D,GAAA,EAAK,sBAAA,CAAuB,MAAA,CAAO,QAAA,EAAU,aAAa;AAAA,GAC5D;AACF;AAEO,SAAS,uBAAA,CACd,YACA,MAAA,EACkC;AAClC,EAAA,MAAM,UAAA,GAAa,QAAA,CAAS,UAAA,EAAY,MAAA,CAAO,iBAAiB,CAAA;AAChE,EAAA,MAAM,SAAA,GAAY,QAAA,CAAS,UAAA,EAAY,MAAA,CAAO,gBAAgB,CAAA;AAC9D,EAAA,MAAM,UAAA,GAAa,QAAA,CAAS,UAAA,EAAY,MAAA,CAAO,iBAAiB,CAAA;AAEhE,EAAA,IAAI,CAAC,UAAA,IAAc,CAAC,SAAA,IAAa,CAAC,UAAA,EAAY;AAC5C,IAAA,OAAO,MAAA;AAAA,EACT;AAEA,EAAA,OAAO;AAAA,IACL,iBACE,UAAA,IACA,4BAAA,CAA6B,UAAA,CAAW,MAAA,EAAQ,WAAW,QAAQ,CAAA;AAAA,IACrE,gBACE,SAAA,IACA,4BAAA,CAA6B,SAAA,CAAU,MAAA,EAAQ,UAAU,QAAQ,CAAA;AAAA,IACnE,iBACE,UAAA,IACA,4BAAA,CAA6B,UAAA,CAAW,MAAA,EAAQ,WAAW,QAAQ;AAAA,GACvE;AACF","file":"contractPrice.js","sourcesContent":["import { ContractMarketPrices, Market } from \"domain/markets/types\";\nimport { TokensData, TokenPrices } from \"domain/tokens/types\";\nimport { expandDecimals } from \"lib/numbers\";\nimport { getByKey } from \"lib/objects\";\n\nimport { ContractPrice } from \"./types\";\n\nexport function parseContractPrice(price: bigint, tokenDecimals: number) {\n  return price * expandDecimals(1, tokenDecimals);\n}\n\nexport function convertToContractPrice(\n  price: bigint,\n  tokenDecimals: number\n): ContractPrice {\n  return (price / expandDecimals(1, tokenDecimals)) as ContractPrice;\n}\n\nexport function convertToContractTokenPrices(\n  prices: TokenPrices,\n  tokenDecimals: number\n) {\n  return {\n    min: convertToContractPrice(prices.minPrice, tokenDecimals),\n    max: convertToContractPrice(prices.maxPrice, tokenDecimals),\n  };\n}\n\nexport function getContractMarketPrices(\n  tokensData: TokensData,\n  market: Market\n): ContractMarketPrices | undefined {\n  const indexToken = getByKey(tokensData, market.indexTokenAddress);\n  const longToken = getByKey(tokensData, market.longTokenAddress);\n  const shortToken = getByKey(tokensData, market.shortTokenAddress);\n\n  if (!indexToken || !longToken || !shortToken) {\n    return undefined;\n  }\n\n  return {\n    indexTokenPrice:\n      indexToken &&\n      convertToContractTokenPrices(indexToken.prices, indexToken.decimals),\n    longTokenPrice:\n      longToken &&\n      convertToContractTokenPrices(longToken.prices, longToken.decimals),\n    shortTokenPrice:\n      shortToken &&\n      convertToContractTokenPrices(shortToken.prices, shortToken.decimals),\n  };\n}\n"]}