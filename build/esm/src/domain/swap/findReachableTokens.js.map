{"version":3,"sources":["../../../../../src/domain/swap/findReachableTokens.ts"],"names":[],"mappings":";;;AAKO,SAAS,oBACd,KAAA,EAC0B;AAC1B,EAAA,MAAM,kBAA4C,EAAC;AAEnD,EAAA,MAAM,SAAA,GAAY,cAAA,CAAe,KAAA,EAAO,CAAC,EAAE,IAAA,EAAK;AAEhD,EAAA,KAAA,MAAW,cAAc,SAAA,EAAW;AAMlC,IAAA,MAAM,WAAA,GAAkC;AAAA,MACtC;AAAA,QACE,YAAA,EAAc,UAAA;AAAA,QACd,UAAA,EAAY;AAAA;AACd,KACF;AACA,IAAA,MAAM,aAAA,uBAAoB,GAAA,EAAY;AAEtC,IAAA,OAAO,WAAA,CAAY,SAAS,CAAA,EAAG;AAC7B,MAAA,MAAM,EAAE,YAAA,EAAc,UAAA,EAAW,GAAI,YAAY,KAAA,EAAM;AAEvD,MAAA,IAAI,aAAA,CAAc,GAAA,CAAI,YAAY,CAAA,EAAG;AACnC,QAAA;AAAA,MACF;AAEA,MAAA,aAAA,CAAc,IAAI,YAAY,CAAA;AAE9B,MAAA,IAAI,cAAc,oBAAA,EAAsB;AACtC,QAAA;AAAA,MACF;AAEA,MAAA,KAAA,MAAW,SAAA,IAAa,KAAA,CAAM,YAAY,CAAA,EAAG;AAC3C,QAAA,WAAA,CAAY,IAAA,CAAK;AAAA,UACf,YAAA,EAAc,SAAA;AAAA,UACd,YAAY,UAAA,GAAa;AAAA,SAC1B,CAAA;AAAA,MACH;AAAA,IACF;AAEA,IAAA,eAAA,CAAgB,UAAU,CAAA,GAAI,KAAA,CAAM,IAAA,CAAK,aAAa,CAAA;AAAA,EACxD;AAEA,EAAA,OAAO,eAAA;AACT","file":"findReachableTokens.js","sourcesContent":["import { objectKeysDeep } from \"lib/objects\";\n\nimport type { MarketsGraph } from \"./buildMarketsAdjacencyGraph\";\nimport { MAX_EDGE_PATH_LENGTH } from \"../../configs/swap\";\n\nexport function findReachableTokens(\n  graph: MarketsGraph\n): Record<string, string[]> {\n  const reachableTokens: Record<string, string[]> = {};\n\n  const allTokens = objectKeysDeep(graph, 1).sort();\n\n  for (const startToken of allTokens) {\n    type TokenSearchState = {\n      currentToken: string;\n      pathLength: number;\n    };\n\n    const searchQueue: TokenSearchState[] = [\n      {\n        currentToken: startToken,\n        pathLength: 0,\n      },\n    ];\n    const visitedTokens = new Set<string>();\n\n    while (searchQueue.length > 0) {\n      const { currentToken, pathLength } = searchQueue.shift()!;\n\n      if (visitedTokens.has(currentToken)) {\n        continue;\n      }\n\n      visitedTokens.add(currentToken);\n\n      if (pathLength >= MAX_EDGE_PATH_LENGTH) {\n        continue;\n      }\n\n      for (const nextToken in graph[currentToken]) {\n        searchQueue.push({\n          currentToken: nextToken,\n          pathLength: pathLength + 1,\n        });\n      }\n    }\n\n    reachableTokens[startToken] = Array.from(visitedTokens);\n  }\n\n  return reachableTokens;\n}\n"]}