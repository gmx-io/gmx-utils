{"version":3,"sources":["../../../../../src/domain/swap/types.ts"],"names":["SwapPricingType"],"mappings":";AAGO,IAAK,eAAA,qBAAAA,gBAAAA,KAAL;AACL,EAAAA,gBAAAA,CAAAA,gBAAAA,CAAA,aAAU,CAAA,CAAA,GAAV,SAAA;AACA,EAAAA,gBAAAA,CAAAA,gBAAAA,CAAA,WAAQ,CAAA,CAAA,GAAR,OAAA;AACA,EAAAA,gBAAAA,CAAAA,gBAAAA,CAAA,YAAS,CAAA,CAAA,GAAT,QAAA;AAHU,EAAA,OAAAA,gBAAAA;AAAA,CAAA,EAAA,eAAA,IAAA,EAAA","file":"types.js","sourcesContent":["import { ExternalSwapQuote } from \"domain/externalSwap/types\";\nimport { Token } from \"domain/tokens/types\";\n\nexport enum SwapPricingType {\n  TwoStep = 0,\n  Shift = 1,\n  Atomic = 2,\n}\n\nexport type SwapAmounts = {\n  amountIn: bigint;\n  usdIn: bigint;\n  amountOut: bigint;\n  usdOut: bigint;\n  priceIn: bigint;\n  priceOut: bigint;\n  swapStrategy: SwapStrategyForIncreaseOrders;\n  minOutputAmount: bigint;\n  uiFeeUsd?: bigint;\n};\n\nexport type SwapStats = {\n  marketAddress: string;\n  tokenInAddress: string;\n  tokenOutAddress: string;\n  isWrap: boolean;\n  isUnwrap: boolean;\n  isOutLiquidity?: boolean;\n  isOutCapacity?: boolean;\n  swapFeeAmount: bigint;\n  swapFeeUsd: bigint;\n  priceImpactDeltaUsd: bigint;\n  amountIn: bigint;\n  amountInAfterFees: bigint;\n  usdIn: bigint;\n  amountOut: bigint;\n  usdOut: bigint;\n};\n\nexport type SwapPathStats = {\n  swapPath: string[];\n  swapSteps: SwapStats[];\n  targetMarketAddress?: string;\n  totalSwapPriceImpactDeltaUsd: bigint;\n  totalSwapFeeUsd: bigint;\n  totalFeesDeltaUsd: bigint;\n  tokenInAddress: string;\n  tokenOutAddress: string;\n  usdOut: bigint;\n  amountOut: bigint;\n};\n\nexport type MarketEdge = {\n  marketAddress: string;\n  from: string;\n  to: string;\n};\n\nexport type SwapRoute = {\n  edges: MarketEdge[];\n  path: string[];\n  liquidity: bigint;\n};\n\ntype TokenAddress = string;\nexport type SwapPaths = {\n  [from: TokenAddress]: {\n    [to: TokenAddress]: TokenAddress[][];\n  };\n};\n\nexport type SwapEstimator = (\n  e: MarketEdge,\n  usdIn: bigint\n) => {\n  usdOut: bigint;\n};\n\nexport type NaiveSwapEstimator = (\n  e: MarketEdge,\n  usdIn: bigint\n) => {\n  swapYield: number;\n};\n\nexport type NaiveNetworkEstimator = (\n  usdIn: bigint,\n  swapCount: number\n) => {\n  networkYield: number;\n  usdOut: bigint;\n};\n\nexport type MarketEdgeLiquidityGetter = (e: MarketEdge) => bigint;\n\nexport type SwapOptimizationOrderArray = (\"liquidity\" | \"length\")[];\nexport type FindSwapPath = (\n  usdIn: bigint,\n  opts?: { order?: SwapOptimizationOrderArray }\n) => SwapPathStats | undefined;\n\nexport type TokensRatio = {\n  ratio: bigint;\n  largestToken: Token;\n  smallestToken: Token;\n};\n\nexport type TokensRatioAndSlippage = TokensRatio & {\n  allowedSwapSlippageBps: bigint;\n  acceptablePrice: bigint;\n};\n\ntype BaseSwapStrategy = {\n  amountIn: bigint;\n  amountOut: bigint;\n  usdIn: bigint;\n  usdOut: bigint;\n  priceIn: bigint;\n  priceOut: bigint;\n  feesUsd: bigint;\n};\n\nexport type NoSwapStrategy = BaseSwapStrategy & {\n  type: \"noSwap\";\n  externalSwapQuote: undefined;\n  swapPathStats: undefined;\n};\n\nexport type ExternalSwapStrategy = BaseSwapStrategy & {\n  type: \"externalSwap\";\n  externalSwapQuote: ExternalSwapQuote;\n  swapPathStats: undefined;\n};\n\nexport type InternalSwapStrategy = BaseSwapStrategy & {\n  type: \"internalSwap\";\n  swapPathStats: SwapPathStats;\n  externalSwapQuote: undefined;\n};\n\nexport type CombinedSwapStrategy = BaseSwapStrategy & {\n  type: \"combinedSwap\";\n  externalSwapQuote: ExternalSwapQuote;\n  swapPathStats: SwapPathStats;\n};\n\nexport type SwapStrategyForIncreaseOrders =\n  | NoSwapStrategy\n  | ExternalSwapStrategy\n  | InternalSwapStrategy\n  | CombinedSwapStrategy;\n\nexport type SwapStrategyForSwapOrders =\n  | NoSwapStrategy\n  | InternalSwapStrategy\n  | CombinedSwapStrategy;\n"]}