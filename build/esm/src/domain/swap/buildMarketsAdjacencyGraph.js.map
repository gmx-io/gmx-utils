{"version":3,"sources":["../../../../../src/domain/swap/buildMarketsAdjacencyGraph.ts"],"names":[],"mappings":";AAYO,SAAS,2BACd,UAAA,EACc;AACd,EAAA,MAAM,QAAsB,EAAC;AAE7B,EAAA,KAAA,MAAW,sBAAsB,UAAA,EAAY;AAC3C,IAAA,MAAM,EAAE,gBAAA,EAAkB,iBAAA,EAAkB,GAC1C,WAAW,kBAAkB,CAAA;AAE/B,IAAA,MAAM,oBAAoB,gBAAA,KAAqB,iBAAA;AAE/C,IAAA,IAAI,iBAAA,EAAmB;AACrB,MAAA,MAAM,YAAA,GAAe,gBAAA;AAErB,MAAA,KAAA,CAAM,YAAY,CAAA,GAAI,KAAA,CAAM,YAAY,KAAK,EAAC;AAC9C,MAAA,KAAA,CAAM,YAAY,EAAE,YAAY,CAAA,GAC9B,MAAM,YAAY,CAAA,CAAE,YAAY,CAAA,IAAK,EAAC;AACxC,MAAA,KAAA,CAAM,YAAY,CAAA,CAAE,YAAY,CAAA,CAAE,KAAK,kBAAkB,CAAA;AAEzD,MAAA;AAAA,IACF;AAEA,IAAA,KAAA,CAAM,gBAAgB,CAAA,GAAI,KAAA,CAAM,gBAAgB,KAAK,EAAC;AACtD,IAAA,KAAA,CAAM,gBAAgB,EAAE,iBAAiB,CAAA,GACvC,MAAM,gBAAgB,CAAA,CAAE,iBAAiB,CAAA,IAAK,EAAC;AACjD,IAAA,KAAA,CAAM,gBAAgB,CAAA,CAAE,iBAAiB,CAAA,CAAE,KAAK,kBAAkB,CAAA;AAElE,IAAA,KAAA,CAAM,iBAAiB,CAAA,GAAI,KAAA,CAAM,iBAAiB,KAAK,EAAC;AACxD,IAAA,KAAA,CAAM,iBAAiB,EAAE,gBAAgB,CAAA,GACvC,MAAM,iBAAiB,CAAA,CAAE,gBAAgB,CAAA,IAAK,EAAC;AACjD,IAAA,KAAA,CAAM,iBAAiB,CAAA,CAAE,gBAAgB,CAAA,CAAE,KAAK,kBAAkB,CAAA;AAAA,EACpE;AAEA,EAAA,OAAO,KAAA;AACT","file":"buildMarketsAdjacencyGraph.js","sourcesContent":["import type { MarketConfig } from \"configs/markets\";\n\ntype FromTokenAddress = string;\ntype ToTokenAddress = string;\ntype MarketAddress = string;\n\nexport type MarketsGraph = {\n  [from: FromTokenAddress]: {\n    [to: ToTokenAddress]: MarketAddress[];\n  };\n};\n\nexport function buildMarketsAdjacencyGraph(\n  marketsMap: Record<string, MarketConfig>\n): MarketsGraph {\n  const graph: MarketsGraph = {};\n\n  for (const marketTokenAddress in marketsMap) {\n    const { longTokenAddress, shortTokenAddress } =\n      marketsMap[marketTokenAddress];\n\n    const isSameCollaterals = longTokenAddress === shortTokenAddress;\n\n    if (isSameCollaterals) {\n      const tokenAddress = longTokenAddress;\n\n      graph[tokenAddress] = graph[tokenAddress] || {};\n      graph[tokenAddress][tokenAddress] =\n        graph[tokenAddress][tokenAddress] || [];\n      graph[tokenAddress][tokenAddress].push(marketTokenAddress);\n\n      continue;\n    }\n\n    graph[longTokenAddress] = graph[longTokenAddress] || {};\n    graph[longTokenAddress][shortTokenAddress] =\n      graph[longTokenAddress][shortTokenAddress] || [];\n    graph[longTokenAddress][shortTokenAddress].push(marketTokenAddress);\n\n    graph[shortTokenAddress] = graph[shortTokenAddress] || {};\n    graph[shortTokenAddress][longTokenAddress] =\n      graph[shortTokenAddress][longTokenAddress] || [];\n    graph[shortTokenAddress][longTokenAddress].push(marketTokenAddress);\n  }\n\n  return graph;\n}\n"]}