{"version":3,"sources":["../../../../../src/domain/swap/swapValues.ts"],"names":["swapStrategy"],"mappings":"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","file":"swapValues.js","sourcesContent":["import { getTotalSwapVolumeFromSwapStats } from \"domain/executionFee\";\nimport { ExternalSwapQuoteParams } from \"domain/externalSwap/types\";\nimport { MarketsInfoData } from \"domain/markets/types\";\nimport { InternalSwapStrategy, NoSwapStrategy } from \"domain/swap/types\";\nimport {\n  FindSwapPath,\n  SwapOptimizationOrderArray,\n  SwapRoute,\n  SwapAmounts,\n  TokensRatio,\n} from \"domain/swap/types\";\nimport { getAmountByRatio } from \"domain/swap/utils\";\nimport type { TokenData } from \"domain/tokens/types\";\nimport {\n  convertToTokenAmount,\n  convertToUsd,\n  getIsEquivalentTokens,\n  getIsStake,\n  getIsUnstake,\n} from \"domain/tokens/utils\";\nimport { bigMath } from \"lib/bigmath\";\nimport { BASIS_POINTS_DIVISOR_BIGINT } from \"lib/numbers\";\nimport { applyFactor } from \"lib/numbers\";\n\nimport {\n  buildReverseSwapStrategy,\n  buildSwapStrategy,\n} from \"./buildSwapStrategy\";\n\nexport function getSwapAmountsByFromValue(p: {\n  tokenIn: TokenData;\n  tokenOut: TokenData;\n  amountIn: bigint;\n  triggerRatio?: TokensRatio;\n  isLimit: boolean;\n  swapOptimizationOrder?: SwapOptimizationOrderArray;\n  allowedSwapSlippageBps?: bigint;\n  uiFeeFactor: bigint;\n  marketsInfoData: MarketsInfoData | undefined;\n  chainId: number;\n  externalSwapQuoteParams: ExternalSwapQuoteParams | undefined;\n  findSwapPath: FindSwapPath;\n}): SwapAmounts {\n  const {\n    tokenIn,\n    tokenOut,\n    amountIn,\n    triggerRatio,\n    isLimit,\n    swapOptimizationOrder,\n    uiFeeFactor,\n    allowedSwapSlippageBps,\n    marketsInfoData,\n    chainId,\n    externalSwapQuoteParams,\n  } = p;\n\n  if (!externalSwapQuoteParams) {\n    return getSwapAmountsByFromValueDefault(p);\n  }\n\n  const swapStrategy = buildSwapStrategy({\n    amountIn,\n    tokenIn,\n    tokenOut,\n    marketsInfoData,\n    chainId,\n    swapOptimizationOrder,\n    externalSwapQuoteParams,\n  });\n\n  const swapPathStats = swapStrategy.swapPathStats;\n\n  const totalSwapVolume = getTotalSwapVolumeFromSwapStats(\n    swapPathStats?.swapSteps\n  );\n  const swapUiFeeUsd = applyFactor(totalSwapVolume, uiFeeFactor);\n  const swapUiFeeAmount = convertToTokenAmount(\n    swapUiFeeUsd,\n    tokenOut.decimals,\n    swapStrategy.priceOut\n  )!;\n\n  const defaultAmounts: SwapAmounts = {\n    amountIn,\n    usdIn: swapStrategy.usdIn,\n    amountOut: swapStrategy.amountOut,\n    usdOut: swapStrategy.usdOut,\n    minOutputAmount: swapStrategy.amountOut,\n    priceIn: swapStrategy.priceIn,\n    priceOut: swapStrategy.priceOut,\n    swapStrategy,\n  };\n\n  let amountOut = swapStrategy.amountOut;\n  let usdOut = swapStrategy.usdOut;\n  let minOutputAmount = 0n;\n\n  if (isLimit) {\n    if (!triggerRatio) {\n      return defaultAmounts;\n    }\n\n    amountOut = getAmountByRatio({\n      fromToken: tokenIn,\n      toToken: tokenOut,\n      fromTokenAmount: amountIn,\n      ratio: triggerRatio.ratio,\n      shouldInvertRatio: triggerRatio.largestToken.address === tokenOut.address,\n      allowedSwapSlippageBps,\n    });\n\n    usdOut = convertToUsd(amountOut, tokenOut.decimals, swapStrategy.priceOut)!;\n    amountOut = convertToTokenAmount(\n      usdOut,\n      tokenOut.decimals,\n      swapStrategy.priceOut\n    )!;\n    minOutputAmount = amountOut;\n  } else {\n    usdOut = swapStrategy.usdOut - swapUiFeeUsd;\n    amountOut = swapStrategy.amountOut - swapUiFeeAmount;\n    minOutputAmount = amountOut;\n  }\n\n  if (amountOut < 0) {\n    amountOut = 0n;\n    usdOut = 0n;\n    minOutputAmount = 0n;\n  }\n\n  return {\n    amountIn,\n    usdIn: swapStrategy.usdIn,\n    amountOut,\n    usdOut,\n    priceIn: swapStrategy.priceIn,\n    priceOut: swapStrategy.priceOut,\n    minOutputAmount,\n    swapStrategy,\n  };\n}\n\nexport function getSwapAmountsByToValue(p: {\n  tokenIn: TokenData;\n  tokenOut: TokenData;\n  amountOut: bigint;\n  triggerRatio?: TokensRatio;\n  isLimit: boolean;\n  swapOptimizationOrder?: SwapOptimizationOrderArray;\n  allowedSwapSlippageBps?: bigint;\n  uiFeeFactor: bigint;\n  marketsInfoData: MarketsInfoData | undefined;\n  chainId: number;\n  externalSwapQuoteParams: ExternalSwapQuoteParams | undefined;\n  findSwapPath: FindSwapPath;\n}): SwapAmounts {\n  const {\n    tokenIn,\n    tokenOut,\n    amountOut,\n    triggerRatio,\n    isLimit,\n    uiFeeFactor,\n    swapOptimizationOrder,\n    allowedSwapSlippageBps,\n    marketsInfoData,\n    chainId,\n    externalSwapQuoteParams,\n  } = p;\n\n  if (!externalSwapQuoteParams) {\n    return getSwapAmountsByToValueDefault(p);\n  }\n\n  const swapStrategyReverse = buildReverseSwapStrategy({\n    amountOut,\n    tokenIn,\n    tokenOut,\n    marketsInfoData,\n    chainId,\n    externalSwapQuoteParams,\n    swapOptimizationOrder,\n  });\n\n  const swapStrategy = buildSwapStrategy({\n    amountIn: swapStrategyReverse.amountIn,\n    tokenIn,\n    tokenOut,\n    marketsInfoData,\n    chainId,\n    swapOptimizationOrder,\n    externalSwapQuoteParams,\n  });\n\n  const uiFeeUsd = applyFactor(swapStrategy.usdIn, uiFeeFactor);\n\n  const defaultAmounts: SwapAmounts = {\n    amountIn: swapStrategy.amountIn,\n    usdIn: swapStrategy.usdIn,\n    amountOut: swapStrategy.amountOut,\n    usdOut: swapStrategy.usdOut,\n    minOutputAmount: swapStrategy.amountOut,\n    priceIn: swapStrategy.priceIn,\n    priceOut: swapStrategy.priceOut,\n    swapStrategy,\n  };\n\n  if (!swapStrategy.swapPathStats) {\n    return defaultAmounts;\n  }\n\n  let amountIn = swapStrategy.amountIn;\n  let usdIn = swapStrategy.usdIn;\n\n  if (isLimit) {\n    if (!triggerRatio) {\n      return defaultAmounts;\n    }\n\n    amountIn = getAmountByRatio({\n      fromToken: tokenOut,\n      toToken: tokenIn,\n      fromTokenAmount: amountOut,\n      ratio: triggerRatio.ratio,\n      shouldInvertRatio: triggerRatio.largestToken.address === tokenIn.address,\n    });\n\n    usdIn = convertToUsd(amountIn, tokenIn.decimals, swapStrategy.priceIn)!;\n    if (allowedSwapSlippageBps !== undefined) {\n      usdIn += bigMath.mulDiv(\n        usdIn,\n        allowedSwapSlippageBps ?? 0n,\n        BASIS_POINTS_DIVISOR_BIGINT\n      );\n    }\n    amountIn = convertToTokenAmount(\n      usdIn,\n      tokenIn.decimals,\n      swapStrategy.priceIn\n    )!;\n  } else {\n    usdIn = swapStrategy.usdIn + uiFeeUsd;\n    amountIn = convertToTokenAmount(\n      usdIn,\n      tokenIn.decimals,\n      swapStrategy.priceIn\n    )!;\n  }\n\n  let minOutputAmount = amountOut;\n\n  if (amountIn < 0) {\n    amountIn = 0n;\n    usdIn = 0n;\n    minOutputAmount = 0n;\n  }\n\n  return {\n    amountIn,\n    amountOut: swapStrategy.amountOut,\n    usdIn: swapStrategy.usdIn,\n    minOutputAmount,\n    usdOut: swapStrategy.usdOut,\n    priceIn: swapStrategy.priceIn,\n    priceOut: swapStrategy.priceOut,\n    swapStrategy: swapStrategy,\n  };\n}\n\nfunction getSwapAmountsByFromValueDefault(p: {\n  tokenIn: TokenData;\n  tokenOut: TokenData;\n  amountIn: bigint;\n  triggerRatio?: TokensRatio;\n  isLimit: boolean;\n  swapOptimizationOrder?: SwapOptimizationOrderArray;\n  allowedSwapSlippageBps?: bigint;\n  findSwapPath: FindSwapPath;\n  uiFeeFactor: bigint;\n}): SwapAmounts {\n  const {\n    tokenIn,\n    tokenOut,\n    amountIn,\n    triggerRatio,\n    isLimit,\n    swapOptimizationOrder,\n    findSwapPath,\n    uiFeeFactor,\n    allowedSwapSlippageBps,\n  } = p;\n\n  const priceIn = tokenIn.prices.minPrice;\n  const priceOut = tokenOut.prices.maxPrice;\n\n  const usdIn = convertToUsd(amountIn, tokenIn.decimals, priceIn)!;\n\n  let amountOut = 0n;\n  let usdOut = 0n;\n  let minOutputAmount = 0n;\n\n  const defaultSwapStrategy: NoSwapStrategy = {\n    type: \"noSwap\",\n    externalSwapQuote: undefined,\n    swapPathStats: undefined,\n    amountIn,\n    amountOut,\n    usdIn,\n    usdOut,\n    priceIn,\n    priceOut,\n    feesUsd: 0n,\n  };\n\n  const defaultAmounts: SwapAmounts = {\n    amountIn,\n    usdIn,\n    amountOut,\n    usdOut,\n    minOutputAmount,\n    priceIn,\n    priceOut,\n    swapStrategy: defaultSwapStrategy,\n  };\n\n  if (amountIn <= 0) {\n    return defaultAmounts;\n  }\n\n  if (getIsEquivalentTokens(tokenIn, tokenOut)) {\n    amountOut = amountIn;\n    usdOut = usdIn;\n    minOutputAmount = amountOut;\n\n    const swapStrategy: NoSwapStrategy = {\n      type: \"noSwap\",\n      externalSwapQuote: undefined,\n      swapPathStats: undefined,\n      amountIn,\n      amountOut,\n      usdIn,\n      usdOut,\n      priceIn,\n      priceOut,\n      feesUsd: 0n,\n    };\n\n    return {\n      amountIn,\n      usdIn,\n      amountOut,\n      usdOut,\n      minOutputAmount,\n      priceIn,\n      priceOut,\n      swapStrategy,\n    };\n  }\n\n  if (getIsStake(tokenIn, tokenOut) || getIsUnstake(tokenIn, tokenOut)) {\n    return getPlainSwapAmountsByFromToken(tokenIn, tokenOut, amountIn);\n  }\n\n  const swapPathStats = findSwapPath(defaultAmounts.usdIn, {\n    order: swapOptimizationOrder,\n  });\n\n  const totalSwapVolume = getTotalSwapVolumeFromSwapStats(\n    swapPathStats?.swapSteps\n  );\n  const swapUiFeeUsd = applyFactor(totalSwapVolume, uiFeeFactor);\n  const swapUiFeeAmount = convertToTokenAmount(\n    swapUiFeeUsd,\n    tokenOut.decimals,\n    priceOut\n  )!;\n\n  if (!swapPathStats) {\n    return defaultAmounts;\n  }\n\n  if (isLimit) {\n    if (!triggerRatio) {\n      return defaultAmounts;\n    }\n\n    amountOut = getAmountByRatio({\n      fromToken: tokenIn,\n      toToken: tokenOut,\n      fromTokenAmount: amountIn,\n      ratio: triggerRatio.ratio,\n      shouldInvertRatio: triggerRatio.largestToken.address === tokenOut.address,\n      allowedSwapSlippageBps,\n    });\n\n    usdOut = convertToUsd(amountOut, tokenOut.decimals, priceOut)!;\n    amountOut = convertToTokenAmount(usdOut, tokenOut.decimals, priceOut)!;\n    minOutputAmount = amountOut;\n  } else {\n    usdOut = swapPathStats.usdOut - swapUiFeeUsd;\n    amountOut = swapPathStats.amountOut - swapUiFeeAmount;\n    minOutputAmount = amountOut;\n  }\n\n  if (amountOut < 0) {\n    amountOut = 0n;\n    usdOut = 0n;\n    minOutputAmount = 0n;\n  }\n\n  const swapStrategy: InternalSwapStrategy = {\n    type: \"internalSwap\",\n    externalSwapQuote: undefined,\n    swapPathStats,\n    amountIn,\n    amountOut,\n    usdIn,\n    usdOut,\n    priceIn,\n    priceOut,\n    feesUsd: usdIn - usdOut,\n  };\n\n  return {\n    amountIn,\n    usdIn,\n    amountOut,\n    usdOut,\n    priceIn,\n    priceOut,\n    minOutputAmount,\n    swapStrategy,\n  };\n}\n\nfunction getSwapAmountsByToValueDefault(p: {\n  tokenIn: TokenData;\n  tokenOut: TokenData;\n  amountOut: bigint;\n  triggerRatio?: TokensRatio;\n  isLimit: boolean;\n  findSwapPath: FindSwapPath;\n  swapOptimizationOrder?: SwapOptimizationOrderArray;\n  allowedSwapSlippageBps?: bigint;\n  uiFeeFactor: bigint;\n}): SwapAmounts {\n  const {\n    tokenIn,\n    tokenOut,\n    amountOut,\n    triggerRatio,\n    isLimit,\n    findSwapPath,\n    uiFeeFactor,\n    swapOptimizationOrder,\n    allowedSwapSlippageBps,\n  } = p;\n\n  const priceIn = tokenIn.prices.minPrice;\n  const priceOut = tokenOut.prices.maxPrice;\n\n  const usdOut = convertToUsd(amountOut, tokenOut.decimals, priceOut)!;\n  const uiFeeUsd = applyFactor(usdOut, uiFeeFactor);\n\n  let minOutputAmount = amountOut;\n\n  let amountIn = 0n;\n  let usdIn = 0n;\n\n  const defaultSwapStrategy: NoSwapStrategy = {\n    type: \"noSwap\",\n    externalSwapQuote: undefined,\n    swapPathStats: undefined,\n    amountIn,\n    amountOut,\n    usdIn,\n    usdOut,\n    priceIn,\n    priceOut,\n    feesUsd: 0n,\n  };\n\n  const defaultAmounts: SwapAmounts = {\n    amountIn,\n    usdIn,\n    amountOut,\n    usdOut,\n    minOutputAmount,\n    priceIn,\n    priceOut,\n    swapStrategy: defaultSwapStrategy,\n  };\n\n  if (amountOut <= 0) {\n    return defaultAmounts;\n  }\n\n  if (getIsEquivalentTokens(tokenIn, tokenOut)) {\n    amountIn = amountOut;\n    usdIn = usdOut;\n\n    const swapStrategy: NoSwapStrategy = {\n      type: \"noSwap\",\n      externalSwapQuote: undefined,\n      swapPathStats: undefined,\n      amountIn,\n      amountOut,\n      usdIn,\n      usdOut,\n      priceIn,\n      priceOut,\n      feesUsd: 0n,\n    };\n\n    return {\n      amountIn,\n      usdIn,\n      amountOut,\n      usdOut,\n      minOutputAmount,\n      priceIn,\n      priceOut,\n      swapStrategy,\n    };\n  }\n\n  if (getIsStake(tokenIn, tokenOut) || getIsUnstake(tokenIn, tokenOut)) {\n    return getPlainSwapAmountsByToToken(tokenIn, tokenOut, amountOut);\n  }\n\n  const baseUsdIn = usdOut;\n  const swapPathStats = findSwapPath(baseUsdIn, {\n    order: swapOptimizationOrder,\n  });\n\n  if (!swapPathStats) {\n    return defaultAmounts;\n  }\n\n  if (isLimit) {\n    if (!triggerRatio) {\n      return defaultAmounts;\n    }\n\n    amountIn = getAmountByRatio({\n      fromToken: tokenOut,\n      toToken: tokenIn,\n      fromTokenAmount: amountOut,\n      ratio: triggerRatio.ratio,\n      shouldInvertRatio: triggerRatio.largestToken.address === tokenIn.address,\n    });\n\n    usdIn = convertToUsd(amountIn, tokenIn.decimals, priceIn)!;\n    if (allowedSwapSlippageBps !== undefined) {\n      usdIn += bigMath.mulDiv(\n        usdIn,\n        allowedSwapSlippageBps ?? 0n,\n        BASIS_POINTS_DIVISOR_BIGINT\n      );\n    }\n    amountIn = convertToTokenAmount(usdIn, tokenIn.decimals, priceIn)!;\n  } else {\n    const adjustedUsdIn =\n      swapPathStats.usdOut > 0\n        ? bigMath.mulDiv(baseUsdIn, usdOut, swapPathStats.usdOut)\n        : 0n;\n\n    usdIn = adjustedUsdIn + uiFeeUsd;\n    amountIn = convertToTokenAmount(usdIn, tokenIn.decimals, priceIn)!;\n  }\n\n  if (amountIn < 0) {\n    amountIn = 0n;\n    usdIn = 0n;\n  }\n\n  const swapStrategy: InternalSwapStrategy = {\n    type: \"internalSwap\",\n    externalSwapQuote: undefined,\n    swapPathStats,\n    amountIn,\n    amountOut,\n    usdIn,\n    usdOut,\n    priceIn,\n    priceOut,\n    feesUsd: usdIn - usdOut,\n  };\n\n  return {\n    amountIn,\n    usdIn,\n    amountOut,\n    usdOut,\n    minOutputAmount,\n    priceIn,\n    priceOut,\n    swapStrategy,\n  };\n}\n\nexport function getSwapPathComparator(\n  order?: SwapOptimizationOrderArray | undefined\n) {\n  return function (a: SwapRoute, b: SwapRoute) {\n    for (const field of order || []) {\n      const isLiquidity = field === \"liquidity\";\n      const aVal = isLiquidity ? a.liquidity : a.path.length;\n      const bVal = isLiquidity ? b.liquidity : b.path.length;\n\n      if (aVal !== bVal) {\n        if (isLiquidity) {\n          return aVal < bVal ? 1 : -1;\n        } else {\n          return aVal < bVal ? -1 : 1;\n        }\n      }\n    }\n\n    return 0;\n  };\n}\n\nfunction getPlainSwapAmountsByFromToken(\n  tokenIn: TokenData,\n  tokenOut: TokenData,\n  amountIn: bigint\n): SwapAmounts {\n  const usdIn = convertToUsd(\n    amountIn,\n    tokenIn.decimals,\n    tokenIn.prices.minPrice\n  )!;\n  const usdOut = usdIn;\n  const amountOut = convertToTokenAmount(\n    usdOut,\n    tokenOut.decimals,\n    tokenOut.prices.maxPrice\n  )!;\n  const priceIn = tokenIn.prices.minPrice;\n  const priceOut = tokenOut.prices.maxPrice;\n\n  const swapStrategy: NoSwapStrategy = {\n    type: \"noSwap\",\n    externalSwapQuote: undefined,\n    swapPathStats: undefined,\n    amountIn,\n    amountOut,\n    usdIn,\n    usdOut,\n    priceIn,\n    priceOut,\n    feesUsd: 0n,\n  };\n\n  return {\n    amountIn,\n    usdIn,\n    amountOut,\n    usdOut,\n    minOutputAmount: amountOut,\n    priceIn,\n    priceOut,\n    swapStrategy,\n  };\n}\n\nfunction getPlainSwapAmountsByToToken(\n  tokenIn: TokenData,\n  tokenOut: TokenData,\n  amountOut: bigint\n): SwapAmounts {\n  const priceIn = tokenIn.prices.minPrice;\n  const priceOut = tokenOut.prices.maxPrice;\n  const usdOut = convertToUsd(amountOut, tokenOut.decimals, priceOut)!;\n  const usdIn = usdOut;\n  const amountIn = convertToTokenAmount(usdIn, tokenIn.decimals, priceIn)!;\n\n  const swapStrategy: NoSwapStrategy = {\n    type: \"noSwap\",\n    externalSwapQuote: undefined,\n    swapPathStats: undefined,\n    amountIn,\n    amountOut,\n    usdIn,\n    usdOut,\n    priceIn,\n    priceOut,\n    feesUsd: 0n,\n  };\n\n  return {\n    amountIn,\n    usdIn,\n    amountOut,\n    usdOut,\n    minOutputAmount: amountOut,\n    priceIn,\n    priceOut,\n    swapStrategy,\n  };\n}\n"]}