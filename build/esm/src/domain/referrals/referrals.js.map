{"version":3,"sources":["../../../../../src/domain/referrals/referrals.ts"],"names":[],"mappings":";;;AAAO,MAAM,wBAAA,GAA2B;AAKjC,SAAS,mBAAmB,OAAA,EAAgB;AACjD,EAAA,IAAI,CAAC,OAAA,IAAW,OAAA,KAAY,QAAA,EAAU;AACpC,IAAA,OAAO,EAAA;AAAA,EACT;AAEA,EAAA,IAAI;AACF,IAAA,MAAM,KAAA,GAAQ,WAAW,OAAO,CAAA;AAChC,IAAA,IAAI,KAAA,CAAM,MAAA,KAAW,EAAA,EAAI,MAAM,IAAI,KAAA,EAAM;AACzC,IAAA,OAAO,aAAA,CAAc,KAAK,CAAA,CAAE,OAAA,CAAQ,QAAQ,EAAE,CAAA;AAAA,EAChD,SAAS,EAAA,EAAI;AACX,IAAA,IAAI,IAAA,GAAO,EAAA;AACX,IAAA,MAAM,OAAA,GAAU,OAAA,CAAQ,SAAA,CAAU,CAAC,CAAA;AACnC,IAAA,KAAA,IAAS,CAAA,GAAI,CAAA,EAAG,CAAA,GAAI,EAAA,EAAI,CAAA,EAAA,EAAK;AAC3B,MAAA,IAAA,IAAQ,MAAA,CAAO,YAAA,CAAa,QAAA,CAAS,OAAA,CAAQ,SAAA,CAAU,CAAA,GAAI,CAAA,EAAG,CAAA,GAAI,CAAA,GAAI,CAAC,CAAA,EAAG,EAAE,CAAC,CAAA;AAAA,IAC/E;AACA,IAAA,OAAO,KAAK,IAAA,EAAK;AAAA,EACnB;AACF;AAEO,SAAS,mBAAmB,IAAA,EAAc;AAC/C,EAAA,IAAI,KAAA,GAAQ,IAAA,CAAK,OAAA,CAAQ,SAAA,EAAW,EAAE,CAAA;AACtC,EAAA,IAAI,KAAA,CAAM,SAAS,wBAAA,EAA0B;AAC3C,IAAA,OAAO,QAAA;AAAA,EACT;AACA,EAAA,OAAO,MAAA,CAAO,YAAY,KAAK,CAAA,EAAG,EAAE,IAAA,EAAM,EAAA,EAAI,GAAA,EAAK,OAAA,EAAS,CAAA;AAC9D","file":"referrals.js","sourcesContent":["export const MAX_REFERRAL_CODE_LENGTH = 20;\n\nimport { Hash, padHex, stringToHex, zeroHash } from \"viem\";\nimport { bytesToString, hexToBytes } from \"viem/utils\";\n\nexport function decodeReferralCode(hexCode?: Hash) {\n  if (!hexCode || hexCode === zeroHash) {\n    return \"\";\n  }\n\n  try {\n    const bytes = hexToBytes(hexCode);\n    if (bytes.length !== 32) throw new Error();\n    return bytesToString(bytes).replace(/\\0+$/, \"\");\n  } catch (ex) {\n    let code = \"\";\n    const cleaned = hexCode.substring(2);\n    for (let i = 0; i < 32; i++) {\n      code += String.fromCharCode(parseInt(cleaned.substring(i * 2, i * 2 + 2), 16));\n    }\n    return code.trim();\n  }\n}\n\nexport function encodeReferralCode(code: string) {\n  let final = code.replace(/[^\\w_]/g, \"\"); // replace everything other than numbers, string  and underscor to ''\n  if (final.length > MAX_REFERRAL_CODE_LENGTH) {\n    return zeroHash;\n  }\n  return padHex(stringToHex(final), { size: 32, dir: \"right\" });\n}\n"]}