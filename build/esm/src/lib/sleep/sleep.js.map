{"version":3,"sources":["../../../../../src/lib/sleep/sleep.ts"],"names":[],"mappings":"AAAO,SAAS,MAAM,EAAA,EAA2B;AAC/C,EAAA,OAAO,IAAI,OAAA,CAAc,CAAC,OAAA,KAAY;AACpC,IAAA,UAAA,CAAW,MAAM,OAAA,EAAQ,EAAG,EAAE,CAAA;AAAA,EAChC,CAAC,CAAA;AACH;AAEO,SAAS,eAAA,CAAgB,IAAY,MAAA,EAAoC;AAC9E,EAAA,OAAO,IAAI,OAAA,CAAc,CAAC,OAAA,EAAS,MAAA,KAAW;AAC5C,IAAA,IAAI,OAAO,OAAA,EAAS;AAClB,MAAA,MAAA,CAAO,kBAAkB,CAAA;AACzB,MAAA;AAAA,IACF;AAEA,IAAA,MAAM,eAAe,MAAM;AACzB,MAAA,YAAA,CAAa,OAAO,CAAA;AACpB,MAAA,MAAA,CAAO,mBAAA,CAAoB,SAAS,YAAY,CAAA;AAChD,MAAA,MAAA,CAAO,kBAAkB,CAAA;AAAA,IAC3B,CAAA;AAEA,IAAA,MAAM,OAAA,GAAU,WAAW,MAAM;AAC/B,MAAA,MAAA,CAAO,mBAAA,CAAoB,SAAS,YAAY,CAAA;AAChD,MAAA,OAAA,EAAQ;AAAA,IACV,GAAG,EAAE,CAAA;AAEL,IAAA,MAAA,CAAO,gBAAA,CAAiB,SAAS,YAAY,CAAA;AAAA,EAC/C,CAAC,CAAA;AACH;AAEA,SAAS,gBAAA,GAA0B;AACjC,EAAA,IAAI,OAAO,iBAAiB,WAAA,EAAa;AACvC,IAAA,OAAO,IAAI,YAAA,CAAa,eAAA,EAAiB,YAAY,CAAA;AAAA,EACvD;AAEA,EAAA,MAAM,KAAA,GAAQ,IAAI,KAAA,CAAM,eAAe,CAAA;AACvC,EAAA,KAAA,CAAM,IAAA,GAAO,YAAA;AACb,EAAA,OAAO,KAAA;AACT","file":"sleep.js","sourcesContent":["export function sleep(ms: number): Promise<void> {\n  return new Promise<void>((resolve) => {\n    setTimeout(() => resolve(), ms);\n  });\n}\n\nexport function sleepWithSignal(ms: number, signal: AbortSignal): Promise<void> {\n  return new Promise<void>((resolve, reject) => {\n    if (signal.aborted) {\n      reject(createAbortError());\n      return;\n    }\n\n    const abortHandler = () => {\n      clearTimeout(timeout);\n      signal.removeEventListener(\"abort\", abortHandler);\n      reject(createAbortError());\n    };\n\n    const timeout = setTimeout(() => {\n      signal.removeEventListener(\"abort\", abortHandler);\n      resolve();\n    }, ms);\n\n    signal.addEventListener(\"abort\", abortHandler);\n  });\n}\n\nfunction createAbortError(): Error {\n  if (typeof DOMException !== \"undefined\") {\n    return new DOMException(\"Sleep aborted\", \"AbortError\");\n  }\n\n  const error = new Error(\"Sleep aborted\");\n  error.name = \"AbortError\";\n  return error;\n}\n"]}