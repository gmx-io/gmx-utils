{"version":3,"sources":["../../../../src/configs/glv.ts"],"names":["glv"],"mappings":"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","file":"glv.js","sourcesContent":["import mapValues from \"lodash/mapValues\";\n\nimport type { GlvInfo, GlvOrMarketInfo } from \"domain/glv/types\";\n\nimport {\n  ARBITRUM,\n  ARBITRUM_SEPOLIA,\n  AVALANCHE,\n  AVALANCHE_FUJI,\n  ContractsChainId,\n  SettlementChainId,\n} from \"./chains\";\nimport { fixTokenSymbolFromMarketLabel } from \"./markets\";\nimport { MARKETS } from \"./markets\";\nimport { SETTLEMENT_CHAINS } from \"./multichain\";\nimport { getTokenBySymbol } from \"./tokens\";\nexport const ENOUGH_DAYS_SINCE_LISTING_FOR_APY = 8;\n\nexport const MARKETS_INDEX: Record<number, Record<string, boolean>> = mapValues(\n  MARKETS,\n  (markets) => mapValues(markets, (market) => Boolean(market.enabled))\n);\n\nexport function isMarketEnabled(chainId: number, marketAddress: string) {\n  return MARKETS_INDEX[chainId]?.[marketAddress] ?? false;\n}\n\nexport const GLV_MARKETS: {\n  [chainId: number]: Record<\n    string,\n    {\n      name: string | undefined;\n      subtitle: string;\n      shortening: string;\n      glvTokenAddress: string;\n      longTokenAddress: string;\n      shortTokenAddress: string;\n    }\n  >;\n} = {\n  [ARBITRUM]: {\n    \"0x528A5bac7E746C9A509A1f4F6dF58A03d44279F9\": {\n      name: undefined,\n      subtitle: \"GMX Liquidity Vault\",\n      shortening: \"GLV\",\n      glvTokenAddress: \"0x528A5bac7E746C9A509A1f4F6dF58A03d44279F9\",\n      longTokenAddress: \"0x2f2a2543B76A4166549F7aaB2e75Bef0aefC5B0f\",\n      shortTokenAddress: \"0xaf88d065e77c8cC2239327C5EDb3A432268e5831\",\n    },\n    \"0xdF03EEd325b82bC1d4Db8b49c30ecc9E05104b96\": {\n      name: undefined,\n      subtitle: \"GMX Liquidity Vault\",\n      shortening: \"GLV\",\n      glvTokenAddress: \"0xdF03EEd325b82bC1d4Db8b49c30ecc9E05104b96\",\n      longTokenAddress: \"0x82aF49447D8a07e3bd95BD0d56f35241523fBab1\",\n      shortTokenAddress: \"0xaf88d065e77c8cC2239327C5EDb3A432268e5831\",\n    },\n  },\n  [AVALANCHE]: {\n    \"0x901eE57f7118A7be56ac079cbCDa7F22663A3874\": {\n      name: undefined,\n      subtitle: \"GMX Liquidity Vault\",\n      shortening: \"GLV\",\n      glvTokenAddress: \"0x901eE57f7118A7be56ac079cbCDa7F22663A3874\",\n      longTokenAddress: \"0xB31f66AA3C1e785363F0875A1B74E27b85FD66c7\",\n      shortTokenAddress: \"0xB97EF9Ef8734C71904D8002F8b6Bc66Dd9c48a6E\",\n    },\n  },\n  [AVALANCHE_FUJI]: {\n    \"0xc519a5b8e5e93D3ec85D62231C1681c44952689d\": {\n      name: \"High Caps\",\n      subtitle: \"Core ETH Markets Vault\",\n      shortening: \"HC\",\n      glvTokenAddress: \"0xc519a5b8e5e93D3ec85D62231C1681c44952689d\",\n      longTokenAddress: \"0x82F0b3695Ed2324e55bbD9A9554cB4192EC3a514\",\n      shortTokenAddress: \"0x3321Fd36aEaB0d5CdfD26f4A3A93E2D2aAcCB99f\",\n    },\n  },\n  [ARBITRUM_SEPOLIA]: {\n    \"0xAb3567e55c205c62B141967145F37b7695a9F854\": {\n      name: \"High Caps\",\n      subtitle: \"Core ETH Markets Vault\",\n      shortening: \"HC\",\n      glvTokenAddress: \"0xAb3567e55c205c62B141967145F37b7695a9F854\",\n      longTokenAddress: \"0x980B62Da83eFf3D4576C647993b0c1D7faf17c73\",\n      shortTokenAddress: \"0x3253a335E7bFfB4790Aa4C25C4250d206E9b9773\",\n    },\n  },\n};\n\nexport type GlvLabel = `GLV [${string}-${string}]`;\n\nexport function getGlvByLabel(chainId: ContractsChainId, label: GlvLabel) {\n  const glvMarkets = GLV_MARKETS[chainId];\n\n  if (!glvMarkets) {\n    throw new Error(`GLV markets not found for chainId ${chainId}`);\n  }\n\n  const labelMatch = label.match(/^GLV\\s*\\[([^\\]]+)\\]$/i);\n\n  if (!labelMatch) {\n    throw new Error(`Invalid GLV label ${label}`);\n  }\n\n  const [, tokensPart] = labelMatch;\n  const separatorIndex = tokensPart.search(/[-/]/);\n\n  if (separatorIndex === -1) {\n    throw new Error(`Invalid GLV label ${label}`);\n  }\n\n  const longSymbolRaw = tokensPart.slice(0, separatorIndex).trim();\n  const shortSymbolRaw = tokensPart.slice(separatorIndex + 1).trim();\n\n  if (!longSymbolRaw || !shortSymbolRaw) {\n    throw new Error(`Invalid GLV label ${label}`);\n  }\n\n  const longToken = getTokenBySymbol(\n    chainId,\n    fixTokenSymbolFromMarketLabel(chainId, longSymbolRaw),\n    {\n      isSynthetic: false,\n    }\n  );\n  const shortToken = getTokenBySymbol(\n    chainId,\n    fixTokenSymbolFromMarketLabel(chainId, shortSymbolRaw),\n    {\n      isSynthetic: false,\n    }\n  );\n\n  if (!longToken || !shortToken) {\n    throw new Error(`Invalid GLV label ${label}`);\n  }\n\n  const glv = Object.values(glvMarkets).find(\n    (glv) =>\n      glv.longTokenAddress === longToken.address &&\n      glv.shortTokenAddress === shortToken.address\n  );\n\n  if (!glv) {\n    throw new Error(`GLV ${label} not found`);\n  }\n\n  return glv;\n}\n\nexport function getIsGlv(chainId: ContractsChainId, address: string) {\n  return Boolean(\n    Object.keys(GLV_MARKETS[chainId]).find(\n      (key) => key.toLowerCase() === address.toLowerCase()\n    )\n  );\n}\n\nexport function getMarketUiConfig(chainId: number, marketAddress: string) {\n  return MARKETS[chainId]?.[marketAddress];\n}\n\nconst SETTLEMENT_CHAIN_TRADABLE_ASSETS_MAP: Record<\n  SettlementChainId,\n  string[]\n> = {} as any;\n\nfor (const chainId of SETTLEMENT_CHAINS) {\n  const tradableTokenAddressesSet = new Set<string>();\n\n  for (const marketAddress in MARKETS[chainId]) {\n    const marketConfig = MARKETS[chainId][marketAddress];\n\n    tradableTokenAddressesSet.add(marketConfig.longTokenAddress);\n    tradableTokenAddressesSet.add(marketConfig.shortTokenAddress);\n  }\n\n  SETTLEMENT_CHAIN_TRADABLE_ASSETS_MAP[chainId] = Array.from(\n    tradableTokenAddressesSet\n  );\n}\n\nexport function getSettlementChainTradableTokenAddresses(\n  chainId: SettlementChainId\n) {\n  return SETTLEMENT_CHAIN_TRADABLE_ASSETS_MAP[chainId];\n}\n\nexport function isGlvInfo(market?: GlvOrMarketInfo): market is GlvInfo {\n  return Boolean(market && \"isGlv\" in market && market.isGlv);\n}\n\nexport function isGlvEnabled(chainId: number) {\n  return Object.keys(GLV_MARKETS[chainId] ?? {}).length > 0;\n}\n"]}